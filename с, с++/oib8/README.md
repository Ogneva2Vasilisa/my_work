### **Задачи**
1.  Создать произвольный графический файл формата ВМР, который будет использоваться в качестве стегоконтейнера. 
2.  Открыть файл изображения с помощью НЕХ-редактора. Найти основные блоки, входящие в файл соответствующего формата. Отметить наличие или отсутствие глобальной палитры. При наличии глобальной палитры указать ее размер.
3.  Создать программу-кодер, реализующую стеганографическое сокрытие "секретного" текстового файла в созданный графический файл. (проект **oib8**) Программа должна соответствовать требованиям:
	1. для сокрытия текста должен применяться метод замены наименее значимых бит в глобальной палитре и в содержательной части графического файла по алгоритму: в каждом байте палитры младший бит заменяется битом шифруемого сообщения и полученный байт записывается в результирующий файл; (LSB)
	2. помимо самого "секретного" сообщения, графический файл, используемый в качестве контейнера, должен включать в себя необходимую для восстановления информацию о скрываемом сообщения (тип скрываемого файла и его размер);
	3. во входных параметрах программы должна быть обозначена степень упаковки скрываемого сообщения, которая указывала бы на количество бит, помещаемое в один байт графического файла, например, один бит сообщения на байт графической информации (три бита на точку в цветовой схеме RGB) или два бита на байт графической информации (шесть битов на точку);
	4. если размеры скрываемого текста не позволяют полностью поместить этот текст в графический файл, при заданной степени упаковки, то процесс скрытия должен быть прерван с указанием причины завершения работы программы, размера текущего сообщения, максимальной вместимости стегоконтейнера, вычисленной по параметрам данного графического файла. 
4.  Запустить разработанную программу-кодер на выполнение, указывая различные значения степени упаковки в качестве параметра командной строки исполняемого файла. Сравнить размер графического файла (стегоконтейнера) до упаковки в нем стегосообщения и после. 
5.  Создать программу-декодер, осуществляющую извлечение "секретного" сообщения из стегоконтейнера (проект **oib8_decode**). Запустить разработанную программу-декодер, используя в качестве входного параметра графический файл, который был получен в п. 4. Извлечь "секретное" сообщение. Сравнить его с исходным.
8.  Открыть с помощью графического редактора файл изображения, содержащий "секретное" сообщение. Выполнить преобразования изображения: растяжение, поворот, отражение. Отметить параметры преобразования, которые были выполнены над графическим файлом. Сохранить результирующее изображение в тот же файл.
9. Запустить программу-декодер, используя в качестве входного параметра графический файл, который был получен в результате преобразований в п. 8. Сравнить расшифрованное и исходное сообщения.

## Ход работы
Для начала работы создадим сам файл .bmp. Для простоты чтения там будет 3 цвета (RGB) и размером 30х30 пикселей. При сохранении рисунка в paint можно выбрать несколько режимов: 16-цветный, 256-цветный и монохромный рисунок.
Подробные свойства файлов
![](../../Pasted%20image%2020250617181712.png)
Изображение, используемое для стегоконтейнера pic_new_24.bmp
![](../../Pasted%20image%2020250617181846.png)
Глубина цвета 24 бит. Информация о цвете пикселя представлена ​​24 битами, то есть для трех основных цветов BRG каждый цвет представлен байтовыми (8) битами. Таким образом, в изображении может быть использовано  различных цветов, поэтому глобальной палитры не существует, что также видно в дизассемблер-редакторе. Размер файла 3 Килобайта. Размер содержательной части файла:  байт. Следовательно, размер стегоконтейнера 2700/8=337 байт.
Программа декодера не работает с повернутыми изображениями (а также перевернутыми, отраженными и так далее) и извлечь из него сообщение невозможно, так как практически любой способ обработки изображения приводит к разрушению сообщения.
Сообщение декодера про измененном изображении:
![](../../Pasted%20image%2020250617181954.png)
## Анализ работы
В данной работе удалось скрыть информацию из текстового файла и прочитать ее, декодировав стегосообщение из стегоконтейнера. При декодировании были считаны малые биты из стегоконтейнера и записаны в созданный программой файл. Итоговый файл имел тот же размер, что и исходный, то есть был идентичен, что соответствует задаче.

## Дополнительные вопросы
_Как используется глобальная палитра?_
Палитра присутствует только в BMP-файлах, содержащих палитровые изображения (с глубиной пикселей 8 бит и менее). К 8-битным изображениям прикладывается палитра, состоящая из не более чем 256 элементов. Седьмой бит (старший) указывает, есть ли глобальная палитра, а биты с 0 по 2 определяют её размер (от 21 до 28). Если флажок глобальной палитры выставлен в 0, её просто нет. А если есть, то размер всего блока в байтах равен количеству цветов в палитре помножить на три. Принцип заполнения: RGBRGBRGB.